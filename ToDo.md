# Crowdworks Scraping Project Plan

## 概要 (Overview)
このドキュメントは、クラウドワークスの案件情報を自動収集するためのスクレイピングプログラムの開発計画を示します。プロジェクトはNode.jsとTypeScriptを使用して実装され、Playwrightライブラリを利用してWebページの操作を行います。

## 目的 (Purpose)
クラウドワークスの案件情報を効率的に収集し、データ分析やレポート作成に利用することを目的としています。自動化により、手動での情報収集の手間を省き、迅速な意思決定をサポートします。

## 対象 (Scope)
本プロジェクトは、クラウドワークスの案件情報を対象とし、特に以下の情報を収集します。
- 案件タイトル
- 案件の詳細説明
- 予算/単価
- 募集期間
- クライアント情報
- 応募人数

## 技術スタック (Technology Stack)
- Node.js
- TypeScript
- Playwright
- dotenv (環境変数管理)
- Winston (ロギング)
- date-fns (日付処理)

## プロジェクトの流れ (Project Flow)
1. **初期設定**: プロジェクトの初期化、必要なパッケージのインストール
2. **基本実装**: スクレイピング基本クラスの実装、ページネーション処理の実装
3. **エラーハンドリング**: 例外処理、ログ機能、リトライ機能の実装
4. **テスト実装**: ユニットテスト、統合テストの作成
5. **最適化**: パフォーマンス改善、コードリファクタリング、ドキュメント作成

## スクレイピング対象URL (Target URL)
- [クラウドワークス案件一覧ページ](https://crowdworks.jp/public/jobs?category_id=1)

## 収集するデータ項目 (Data Items to Collect)
- 案件タイトル
- 案件の詳細説明
- 予算/単価
- 募集期間
- クライアント情報
- 応募人数

## ページネーション処理 (Pagination Handling)
- 次のページへの自動遷移
- 全ページのデータ取得
- ページ遷移の遅延設定

## データ保存形式 (Data Storage Format)
- スクレイピングしたデータをJSON形式で保存
- タイムスタンプ付きのファイル名
- 重複データの排除

## エラーハンドリング (Error Handling)
- ネットワークエラーの処理
- ページ読み込みタイムアウトの処理
- 要素が見つからない場合の例外処理
- レート制限への対応

## ロギング (Logging)
- Winstonを使用してログを管理
- エラー、警告、情報レベルのログを出力

## 環境変数管理 (Environment Variable Management)
- dotenvを使用して環境変数を管理
- APIキーや機密情報は環境変数で管理

## データ保存先 (Data Storage Location)
- スクレイピング結果はローカルファイルシステムに保存
- 保存先ディレクトリは`./data`とする

## Project Overview
クラウドワークスの案件情報を自動収集するスクレイピングプログラムの開発計画です。

## 機能要件 (Functional Requirements)

### 基本機能
1. 指定されたURLからの案件情報の取得
   - 案件タイトル
   - 案件の詳細説明
   - 予算/単価
   - 募集期間
   - クライアント情報
   - 応募人数

2. ページネーション処理
   - 次のページへの自動遷移
   - 全ページのデータ取得
   - ページ遷移の遅延設定

3. データ保存
   - スクレイピングしたデータをJSON形式で保存
   - タイムスタンプ付きのファイル名
   - 重複データの排除

### エラーハンドリング
- ネットワークエラーの処理
- ページ読み込みタイムアウトの処理
- 要素が見つからない場合の例外処理
- レート制限への対応

## 技術要件 (Technical Requirements)

### 開発環境
- Node.js
- TypeScript
- Playwright
- dotenv（環境変数管理）

### ライブラリ構成
```
dependencies:
  - playwright
  - typescript
  - dotenv
  - winston (ログ管理)
  - date-fns (日付処理)

devDependencies:
  - @types/node
  - ts-node
  - eslint
  - prettier
```

### プロジェクト構造
```
src/
  ├── config/
  │   └── config.ts          # 設定ファイル
  ├── types/
  │   └── types.ts           # 型定義
  ├── services/
  │   ├── scraper.ts         # スクレイピング処理
  │   └── pageNavigator.ts   # ページ遷移処理
  ├── utils/
  │   ├── logger.ts          # ログ処理
  │   └── dateFormatter.ts   # 日付フォーマット
  └── index.ts               # エントリーポイント
```

## 実装手順 (Implementation Steps)

1. 初期設定
   - [x] プロジェクトの初期化
   - [x] 必要なパッケージのインストール
   - [x] TypeScript設定
   - [x] ESLint/Prettier設定

2. 基本実装
   - [x] 設定ファイルの作成
   - [x] スクレイピング基本クラスの実装
   - [x] ページネーション処理の実装
   - [x] データ保存機能の実装

3. エラーハンドリング実装
   - [x] 例外処理の実装
   - [x] ログ機能の実装
   - [x] リトライ機能の実装

4. テスト実装
   - [x] ユニットテストの作成
   - [x] 統合テストの作成
   - [x] エラーケースのテスト

5. 最適化
   - [ ] パフォーマンス改善
   - [ ] コードリファクタリング
   - [ ] ドキュメント作成

## 注意事項 (Considerations)

1. スクレイピングルール
   - アクセス頻度の制限
   - ユーザーエージェントの設定
   - robots.txtの確認

2. セキュリティ
   - 環境変数での機密情報管理
   - エラーログでの機密情報漏洩防止

3. パフォーマンス
   - 同時実行数の制限
   - メモリ使用量の監視
   - キャッシュ戦略

## 開発スケジュール (Timeline)

1. 初期設定: 1日
2. 基本実装: 2-3日
3. エラーハンドリング: 1-2日
4. テスト実装: 2日
5. 最適化とドキュメント: 1-2日

合計予定期間: 7-10日
